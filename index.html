<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home Library Catalog</title>
    <style>

        .sidenav {
            height: 100%; /* Full-height: remove this if you want "auto" height */
            width: 326px; /* Set the width of the sidebar */
            position: fixed; /* Fixed Sidebar (stay in place on scroll) */
            z-index: 1; /* Stay on top */
            top: 0; /* Stay at the top */
            left: 0;
            background-color: #9CAEA9; /* Black */
            overflow-x: hidden; /* Disable horizontal scroll */
            padding-top: 20px;
        }
    
        /* Style page content */
        .main {
            margin-left: 326px; /* Same as the width of the sidebar */
            padding: 0px 10px;
        }
    
        /* On smaller screens, where height is less than 450px, change the style of the sidebar (less padding and a smaller font size) */
        @media screen and (max-height: 450px) {
            .sidenav {padding-top: 15px;}
            .sidenav a {font-size: 18px;}
        }
          
        body { 
            font-family: Inter, sans-serif; 
            background-color: #ffffff; 
            padding: 20px; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            height: 100vh;
        }

        h1, h2 { text-align: center; color: white; font-size: 14px; padding: 20px; } 
        input { 
            width: 80%; 
            padding: 8px; 
            border: 1px solid #ccc; 
            display: block; 
            text-align: center; 
            margin: auto; 
        }

        add-button { 
            width: 80%; 
            padding: 8px; 
            border: 1px solid #ffffff; 
            display: block;
            text-align: center; 
            margin: auto; 
            
            margin-top: 10px;
            background-color: #9CAEA9; 
            color: white; 
            cursor: pointer; 
            font-size: 14px; 

        }
        add-button:hover { background-color: #CCDAD1; }

        delete-button { 
            width: 80%; 
            padding: 8px; 
            border: 1px solid #ffffff; 
            display: block;
            text-align: center; 
            margin: auto; 
            
            margin-top: 10px;
            background-color: #AE9C9C; 
            color: white; 
            cursor: pointer; 
            font-size: 14px; 

        }
        delete-button:hover { background-color: #CCDAD1; }

    </style>

</head>

<body>
    <div class="sidenav">
        <h1>W E L C O M E &nbsp; T O &nbsp; Y O U R <br>  H O M E &nbsp; L I B R A R Y</h1>
        <input type="text" id="title" placeholder="Enter Book Title">
        <input type="text" id="author" placeholder="Enter Author Name">
        <input type="text" id="genre" placeholder="Enter Genre">
        <input type="text" id="dateread" placeholder="Enter Date Read">
        <add-button onclick="SubmitBook();ClearFields();">Add Book</add-button>    
        <delete-button onclick="SubmitBook();ClearFields();">Remove Book</delete-button>   
    </div>
    

    <script>
        function SubmitBook() {
            let title = document.getElementById("title").value;
            let author = document.getElementById("author").value;

            if (title && author) {
                let bookData = JSON.stringify({ title: title, author: author });
                pywebview.api.AddBookToTableJs(bookData).then(UpdateBookList);
            } else {
                alert("Please enter both Title and Author.");
            }
        }

        function RemoveBook() {
            let title = document.getElementById("title").value;

            if (title) {
                let bookData = JSON.stringify({ title: title });
                pywebview.api.RemoveBookFromTableJs(bookData).then(UpdateBookList);
            } else {
                alert("Please enter Title");
            }
        }

        function UpdateBookList(bookList) {
            let listElement = document.getElementById("book-list");
            listElement.innerHTML = "";

            JSON.parse(bookList).forEach(book => {
                let li = document.createElement("li");
                li.textContent = `ðŸ“– ${book.title} by ${book.author}`;
                listElement.appendChild(li);
            });
        }

        function ClearFields() {
            document.getElementById("title").value = "";
            document.getElementById("author").value = "";
       }

       function RefreshList (){
        pywebview.api.GetListofBooksJs().then(UpdateBookList);
       }

       function SearchForBook (){
        let title = document.getElementById("title").value;
        let bookData = JSON.stringify({ title: title });
        pywebview.api.SearchJs(bookData).then(UpdateBookList);
       }

        // Load books from database when UI loads
        window.onload = function() {
            pywebview.api.GetListofBooksJs().then(UpdateBookList);
        };
    </script>

</body>
</html>
